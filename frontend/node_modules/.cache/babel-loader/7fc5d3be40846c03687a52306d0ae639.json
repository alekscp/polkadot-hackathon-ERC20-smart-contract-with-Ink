{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.memo = memo;\n\nvar _memoizee = _interopRequireDefault(require(\"memoizee\"));\n\nvar _rxjs = require(\"rxjs\");\n\nvar _rxjs2 = require(\"@polkadot/rpc-core/rxjs\");\n\nvar _normalizer = _interopRequireDefault(require(\"@polkadot/rpc-core/normalizer\")); // Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n// Wraps a derive, doing 2 things to optimize calls -\n//   1. creates a memo of the inner fn -> Observable, removing when unsubscribed\n//   2. wraps the observable in a drr() (which includes an unsub delay)\n\n/** @internal */\n\n\nfunction memo(instanceId, inner) {\n  const cached = (0, _memoizee.default)((...params) => new _rxjs.Observable(observer => {\n    const subscription = inner(...params).subscribe(observer);\n    return () => {\n      cached.delete(...params);\n      subscription.unsubscribe();\n    };\n  }).pipe((0, _rxjs2.drr)()), {\n    // Normalize via JSON.stringify, allow e.g. AccountId -> ss58\n    normalizer: (0, _normalizer.default)(instanceId)\n  });\n  return cached;\n}","map":{"version":3,"sources":["/Users/aclapinpepin/code/substrate-front-end-template/node_modules/@polkadot/api-contract/node_modules/@polkadot/api-derive/util/memo.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","memo","_memoizee","_rxjs","_rxjs2","_normalizer","instanceId","inner","cached","default","params","Observable","observer","subscription","subscribe","delete","unsubscribe","pipe","drr","normalizer"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,IAAR,GAAeA,IAAf;;AAEA,IAAIC,SAAS,GAAGP,sBAAsB,CAACC,OAAO,CAAC,UAAD,CAAR,CAAtC;;AAEA,IAAIO,KAAK,GAAGP,OAAO,CAAC,MAAD,CAAnB;;AAEA,IAAIQ,MAAM,GAAGR,OAAO,CAAC,yBAAD,CAApB;;AAEA,IAAIS,WAAW,GAAGV,sBAAsB,CAACC,OAAO,CAAC,+BAAD,CAAR,CAAxC,C,CAEA;AACA;AACA;AACA;AACA;;AAEA;;;AACA,SAASK,IAAT,CAAcK,UAAd,EAA0BC,KAA1B,EAAiC;AAC/B,QAAMC,MAAM,GAAG,CAAC,GAAGN,SAAS,CAACO,OAAd,EAAuB,CAAC,GAAGC,MAAJ,KAAe,IAAIP,KAAK,CAACQ,UAAV,CAAqBC,QAAQ,IAAI;AACpF,UAAMC,YAAY,GAAGN,KAAK,CAAC,GAAGG,MAAJ,CAAL,CAAiBI,SAAjB,CAA2BF,QAA3B,CAArB;AACA,WAAO,MAAM;AACXJ,MAAAA,MAAM,CAACO,MAAP,CAAc,GAAGL,MAAjB;AACAG,MAAAA,YAAY,CAACG,WAAb;AACD,KAHD;AAID,GANoD,EAMlDC,IANkD,CAM7C,CAAC,GAAGb,MAAM,CAACc,GAAX,GAN6C,CAAtC,EAMa;AAC1B;AACAC,IAAAA,UAAU,EAAE,CAAC,GAAGd,WAAW,CAACI,OAAhB,EAAyBH,UAAzB;AAFc,GANb,CAAf;AAUA,SAAOE,MAAP;AACD","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.memo = memo;\n\nvar _memoizee = _interopRequireDefault(require(\"memoizee\"));\n\nvar _rxjs = require(\"rxjs\");\n\nvar _rxjs2 = require(\"@polkadot/rpc-core/rxjs\");\n\nvar _normalizer = _interopRequireDefault(require(\"@polkadot/rpc-core/normalizer\"));\n\n// Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n// Wraps a derive, doing 2 things to optimize calls -\n//   1. creates a memo of the inner fn -> Observable, removing when unsubscribed\n//   2. wraps the observable in a drr() (which includes an unsub delay)\n\n/** @internal */\nfunction memo(instanceId, inner) {\n  const cached = (0, _memoizee.default)((...params) => new _rxjs.Observable(observer => {\n    const subscription = inner(...params).subscribe(observer);\n    return () => {\n      cached.delete(...params);\n      subscription.unsubscribe();\n    };\n  }).pipe((0, _rxjs2.drr)()), {\n    // Normalize via JSON.stringify, allow e.g. AccountId -> ss58\n    normalizer: (0, _normalizer.default)(instanceId)\n  });\n  return cached;\n}"]},"metadata":{},"sourceType":"script"}